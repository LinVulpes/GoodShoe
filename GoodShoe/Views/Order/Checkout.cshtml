@model List<GoodShoe.ViewModels.CheckoutViewModel>

@{
    ViewData["Title"] = "Checkout";
}
<link rel="stylesheet" href="~/css/checkout.css" />

<div class="container-fluid px-4 py-4">
    <h2 class="checkout-title mb-4">Checkout</h2>
    <div class="row">
        <!-- LEFT: Delivery & Payment -->
        <div class="col-lg-7">
            <form asp-action="SubmitCheckout" method="post">
                <!-- Delivery Section -->
                <section class="mb-5">
                    <h4 class="mb-3">Delivery</h4>
                    <div class="mb-3"><input asp-for="FirstName" class="form-control" placeholder="First Name" /></div>
                    <div class="mb-3"><input asp-for="LastName" class="form-control" placeholder="Last Name" /></div>
                    <div class="mb-3"><input asp-for="ShippingAddress" class="form-control" placeholder="Street Address & Postcode" /></div>
                    <div class="mb-3"><input asp-for="ContactNumber" class="form-control" placeholder="Contact Number" /></div>
                </section>

                <!-- Payment Selection -->
                <section class="mb-4">
                    <h4 class="mb-3">Payment</h4>
                    <p>How would you like to pay?</p>
                    <div class="btn-group-vertical w-100" role="group">
                        <input type="radio" name="PaymentMethod" value="Card" checked hidden />
                        <button type="button" class="btn btn-outline-dark mb-2 payment-btn active" data-method="Card">Credit / Debit Card</button>
                        <button type="button" class="btn btn-outline-dark mb-2 payment-btn" data-method="ApplePay">Apple Pay</button>
                        <button type="button" class="btn btn-outline-dark payment-btn" data-method="PayPal">PayPal</button>
                    </div>
                </section>

                <!-- Card Details -->
                <section class="mb-5">
                    <h5 class="mb-3">Enter Your Payment Details</h5>
                    <div class="mb-3"><input asp-for="CardName" class="form-control" placeholder="Name on Card" /></div>
                    <div class="mb-3"><input asp-for="CardNumber" class="form-control" placeholder="Card Number" /></div>
                    <div class="row g-2">
                        <div class="col-md-6"><input asp-for="Expiry" class="form-control" placeholder="MM/YY" /></div>
                        <div class="col-md-6"><input asp-for="CVV" class="form-control" placeholder="CVV" /></div>
                    </div>
                </section>

                <button type="submit" class="btn btn-dark w-100 py-2">Place Order</button>
            </form>
        </div>

        <!-- RIGHT: Order Summary -->
        <div class="col-lg-5 mt-5 mt-lg-0">
            <div class="checkout-summary p-4 border rounded">
                <h4 class="mb-3">Summary</h4>
                <div class="d-flex justify-content-between mb-2">
                    <span>Subtotal</span>
                    <span>@Model.Subtotal.ToString("C")</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Estimated Delivery & Handling</span>
                    <span>$@Model.DeliveryFee</span>
                </div>
                <hr>
                <div class="d-flex justify-content-between mb-4 fw-bold">
                    <span>Total</span>
                    <span>@Model.Total.ToString("C")</span>
                </div>

                <p class="text-muted mb-3">Arrives Mon, 24th - Fri, 30th May</p>

                @foreach (var item in Model.CartItems)
                {
                    <div class="d-flex mb-3 align-items-start">
                        <img src="@item.ImageUrl" alt="@item.ProductName" class="img-thumbnail me-3" style="width: 80px;">
                        <div>
                            <p class="mb-1 fw-bold">@item.ProductName</p>
                            <p class="mb-1 text-muted small">@item.Category<br>Size: @item.Size</p>
                            <p class="mb-0 fw-semibold">@item.Price.ToString("C") x @item.Quantity</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/checkout.js"></script>
}
